<html>
  <head>
    <% include partials/head %>
    <style>

    </style>
  </head>
  <body>
    <% include partials/nav  %>
    <main role="main">
      <div class="container">
          <div class="row">
            <form action="/poll/update/<%=user.id%>/<%=user.polls[poll].name%>" method="post" id="form" class="col s10 offset-s2">
            <div class="row">
              <div class="input-field col s8">
                <input placeholder="Name of Poll" id="nameOfPoll" type="text" class="validate" name="name" value="<%=user.polls[poll].name%>" disabled>
                <label for="name">Name of Poll</label>
            </div>
            </div>
            <% let o = 1 %>
            <% user.polls[poll].options.forEach((option) => { %>

            <div class="row">
              <div class="input-field col s8">
              <input  id="password" type="text" class="validate" name="option <%=o%>" value="<%=option["name"]%>" disabled>
              <label for="option">Option <%=o%></label>
              </div>
            </div>
            <% o++ %>
            <% }) %> 
    <a id="moreOptions" class="btn btn-info" onclick="addNewOption()">More Options</a>
    <button class="waves-effect waves-light btn" type="submit">Submit</button>
    </form>
</div>
</div>
</main> 
    
<% include partials/foot-css %>  
<% include partials/foot %>
<script>
$(".dropdown-button").dropdown();
$(".button-collapse").sideNav();

let j = 3;
function addNewOption(){
    let form =  document.getElementById("form");
    console.log(form)
    let a    = document.querySelector("a#moreOptions");
    let input        = document.createElement("input");
    const attributes = ["type","class","placeholder","name"];
    let attributesValues = ["text","form-control",`new option`,`Option ${j}`]
    attributes.forEach((attribute,index) => {
        let att = document.createAttribute(attribute);
        att.value = attributesValues[index];
        input.setAttributeNode(att);
    })
    form.insertBefore(input,a)
    j++;
}
</script>
</body>
</html>